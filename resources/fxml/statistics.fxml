<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.collections.FXCollections?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.Font?>
<?import javafx.scene.chart.BarChart?>
<?import javafx.scene.chart.CategoryAxis?>
<?import javafx.scene.chart.NumberAxis?>
<?import javafx.scene.chart.PieChart?>
<?import javafx.scene.chart.LineChart?>
<?import javafx.geometry.Side?>
<?import java.lang.String?>

<VBox xmlns="http://javafx.com/javafx/11.0.1" xmlns:fx="http://javafx.com/fxml/1" fx:controller="org.dorm.view.StatisticsController" spacing="20.0" styleClass="statistics-root">
   <children>
      <!-- é¡µé¢å¤´éƒ¨ -->
      <HBox spacing="20" alignment="CENTER_LEFT" styleClass="stats-page-header">
         <children>
            <Label text="ðŸ“Š" styleClass="stats-page-icon" />
            <VBox spacing="5" alignment="CENTER_LEFT">
               <children>
                  <Label text="æ•°æ®ç»Ÿè®¡åˆ†æžä¸­å¿ƒ" styleClass="stats-page-title" />
                  <Label text="å…¨é¢çš„æ•°æ®å¯è§†åŒ–åˆ†æžï¼Œä¸ºç®¡ç†å†³ç­–æä¾›æ•°æ®æ”¯æŒ" styleClass="stats-page-subtitle" />
               </children>
            </VBox>
            <Region HBox.hgrow="ALWAYS" />
            <Button fx:id="backToMainButton" styleClass="stats-back-button" onAction="#backToMain" text="ðŸ  è¿”å›žä¸»ç•Œé¢" />
         </children>
         <VBox.margin>
            <Insets bottom="15.0" left="30.0" right="30.0" top="20.0" />
         </VBox.margin>
      </HBox>

      <!-- å¿«æ·æ“ä½œæ  -->
      <HBox spacing="15" alignment="CENTER_LEFT" styleClass="stats-toolbar">
         <children>
            <Button fx:id="refreshButton" styleClass="stats-primary-button" onAction="#refreshStatistics" text="ðŸ”„ åˆ·æ–°æ•°æ®" />
            <Button fx:id="exportButton" styleClass="stats-secondary-button" onAction="#exportData" text="ðŸ“¤ å¯¼å‡ºæŠ¥å‘Š" />

            <Separator orientation="VERTICAL" styleClass="stats-separator" />

            <!-- æ—¶é—´èŒƒå›´é€‰æ‹© -->
            <VBox spacing="2" alignment="CENTER_LEFT">
               <children>
                  <Label text="æ—¶é—´èŒƒå›´" styleClass="stats-label" />
                  <ComboBox fx:id="timeRangeCombo" styleClass="stats-combo" prefWidth="100">
                     <items>
                        <FXCollections fx:factory="observableArrayList">
                           <String fx:value="å…¨éƒ¨æ—¶é—´" />
                           <String fx:value="æœ¬æœˆ" />
                           <String fx:value="æœ¬å­¦æœŸ" />
                           <String fx:value="æœ¬å­¦å¹´" />
                        </FXCollections>
                     </items>
                  </ComboBox>
               </children>
            </VBox>

            <!-- æ•°æ®ç±»åž‹é€‰æ‹© -->
            <VBox spacing="2" alignment="CENTER_LEFT">
               <children>
                  <Label text="æ•°æ®ç±»åž‹" styleClass="stats-label" />
                  <ComboBox fx:id="dataTypeCombo" styleClass="stats-combo" prefWidth="100">
                     <items>
                        <FXCollections fx:factory="observableArrayList">
                           <String fx:value="ç»¼åˆç»Ÿè®¡" />
                           <String fx:value="å­¦ç”Ÿç»Ÿè®¡" />
                           <String fx:value="å®¿èˆç»Ÿè®¡" />
                           <String fx:value="ç»´ä¿®ç»Ÿè®¡" />
                        </FXCollections>
                     </items>
                  </ComboBox>
               </children>
            </VBox>
         </children>
         <VBox.margin>
            <Insets bottom="15.0" left="30.0" right="30.0" top="5.0" />
         </VBox.margin>
      </HBox>

      <!-- ç»Ÿè®¡å¡ç‰‡åŒºåŸŸ -->
      <VBox spacing="20" alignment="CENTER" styleClass="stats-cards-area">
         <children>
            <HBox spacing="20" alignment="CENTER">
               <children>
                  <!-- æ€»å­¦ç”Ÿæ•°å¡ç‰‡ -->
                  <VBox styleClass="stats-overview-card">
                     <children>
                        <HBox spacing="15" alignment="CENTER_LEFT">
                           <children>
                              <Label text="ðŸ‘¥" styleClass="stats-card-icon" />
                              <VBox spacing="5">
                                 <children>
                                    <Label text="æ€»å­¦ç”Ÿæ•°" styleClass="stats-card-label" />
                                    <Label fx:id="totalStudentsLabel" text="0" styleClass="stats-card-value" />
                                 </children>
                              </VBox>
                           </children>
                        </HBox>
                        <Label fx:id="studentsChangeLabel" text="è¾ƒä¸Šæœˆ +0" styleClass="stats-card-change positive" />
                     </children>
                     <VBox.margin>
                        <Insets top="20" right="20" bottom="20" left="20" />
                     </VBox.margin>
                  </VBox>

                  <!-- æ€»å®¿èˆæ•°å¡ç‰‡ -->
                  <VBox styleClass="stats-overview-card">
                     <children>
                        <HBox spacing="15" alignment="CENTER_LEFT">
                           <children>
                              <Label text="ðŸ¢" styleClass="stats-card-icon" />
                              <VBox spacing="5">
                                 <children>
                                    <Label text="æ€»å®¿èˆæ•°" styleClass="stats-card-label" />
                                    <Label fx:id="totalDormitoriesLabel" text="0" styleClass="stats-card-value" />
                                 </children>
                              </VBox>
                           </children>
                        </HBox>
                        <Label fx:id="dormitoriesChangeLabel" text="è¾ƒä¸Šæœˆ +0" styleClass="stats-card-change neutral" />
                     </children>
                     <VBox.margin>
                        <Insets top="20" right="20" bottom="20" left="20" />
                     </VBox.margin>
                  </VBox>

                  <!-- ç»´ä¿®ç”³è¯·æ•°å¡ç‰‡ -->
                  <VBox styleClass="stats-overview-card">
                     <children>
                        <HBox spacing="15" alignment="CENTER_LEFT">
                           <children>
                              <Label text="ðŸ”§" styleClass="stats-card-icon" />
                              <VBox spacing="5">
                                 <children>
                                    <Label text="ç»´ä¿®ç”³è¯·" styleClass="stats-card-label" />
                                    <Label fx:id="totalRepairsLabel" text="0" styleClass="stats-card-value" />
                                 </children>
                              </VBox>
                           </children>
                        </HBox>
                        <Label fx:id="repairsChangeLabel" text="è¾ƒä¸Šæœˆ +0" styleClass="stats-card-change positive" />
                     </children>
                     <VBox.margin>
                        <Insets top="20" right="20" bottom="20" left="20" />
                     </VBox.margin>
                  </VBox>

                  <!-- ç¼´è´¹çŽ‡å¡ç‰‡ -->
                  <VBox styleClass="stats-overview-card">
                     <children>
                        <HBox spacing="15" alignment="CENTER_LEFT">
                           <children>
                              <Label text="ðŸ’°" styleClass="stats-card-icon" />
                              <VBox spacing="5">
                                 <children>
                                    <Label text="ç¼´è´¹çŽ‡" styleClass="stats-card-label" />
                                    <Label fx:id="paymentRateLabel" text="0%" styleClass="stats-card-value" />
                                 </children>
                              </VBox>
                           </children>
                        </HBox>
                        <Label fx:id="paymentChangeLabel" text="ç›®æ ‡ 95%" styleClass="stats-card-change info" />
                     </children>
                     <VBox.margin>
                        <Insets top="20" right="20" bottom="20" left="20" />
                     </VBox.margin>
                  </VBox>
               </children>
            </HBox>
         </children>
         <VBox.margin>
            <Insets bottom="10.0" left="30.0" right="30.0" top="10.0" />
         </VBox.margin>
      </VBox>

      <!-- å›¾è¡¨å±•ç¤ºåŒºåŸŸ -->
      <VBox spacing="20" alignment="CENTER" VBox.vgrow="ALWAYS" styleClass="stats-charts-area">
         <children>
            <Label text="ðŸ“ˆ æ•°æ®è¶‹åŠ¿åˆ†æž" styleClass="stats-section-title" />

            <!-- ç¬¬ä¸€è¡Œå›¾è¡¨ -->
            <HBox spacing="20" alignment="CENTER">
               <children>
                  <!-- å­¦ç”Ÿå­¦é™¢åˆ†å¸ƒ -->
                  <VBox spacing="10" alignment="CENTER" styleClass="stats-chart-card" VBox.vgrow="ALWAYS">
                     <children>
                        <Label text="å­¦ç”Ÿå­¦é™¢åˆ†å¸ƒ" styleClass="stats-chart-title" />
                        <ScrollPane fitToWidth="true" fitToHeight="true" VBox.vgrow="ALWAYS" styleClass="stats-chart-scroll">
                           <content>
                              <PieChart fx:id="collegeChart" title="" prefWidth="320" prefHeight="250" styleClass="stats-chart" legendSide="BOTTOM">
                              </PieChart>
                           </content>
                        </ScrollPane>
                     </children>
                  </VBox>

                  <!-- å®¿èˆä½¿ç”¨æƒ…å†µ -->
                  <VBox spacing="10" alignment="CENTER" styleClass="stats-chart-card" VBox.vgrow="ALWAYS">
                     <children>
                        <Label text="å®¿èˆä½¿ç”¨æƒ…å†µ" styleClass="stats-chart-title" />
                        <ScrollPane fitToWidth="true" fitToHeight="true" VBox.vgrow="ALWAYS" styleClass="stats-chart-scroll">
                           <content>
                              <BarChart fx:id="dormitoryChart" title="" prefWidth="320" prefHeight="250" styleClass="stats-chart" legendSide="BOTTOM">
                                 <xAxis>
                                    <CategoryAxis side="BOTTOM" />
                                 </xAxis>
                                 <yAxis>
                                    <NumberAxis side="LEFT" />
                                 </yAxis>
                              </BarChart>
                           </content>
                        </ScrollPane>
                     </children>
                  </VBox>
               </children>
            </HBox>

            <!-- ç¬¬äºŒè¡Œå›¾è¡¨ -->
            <HBox spacing="20" alignment="CENTER">
               <children>
                  <!-- ç»´ä¿®ç”³è¯·è¶‹åŠ¿ -->
                  <VBox spacing="10" alignment="CENTER" styleClass="stats-chart-card" VBox.vgrow="ALWAYS">
                     <children>
                        <Label text="ç»´ä¿®ç”³è¯·è¶‹åŠ¿" styleClass="stats-chart-title" />
                        <ScrollPane fitToWidth="true" fitToHeight="true" VBox.vgrow="ALWAYS" styleClass="stats-chart-scroll">
                           <content>
                              <LineChart fx:id="repairTrendChart" title="" prefWidth="320" prefHeight="250" styleClass="stats-chart" legendSide="BOTTOM">
                                 <xAxis>
                                    <CategoryAxis side="BOTTOM" />
                                 </xAxis>
                                 <yAxis>
                                    <NumberAxis side="LEFT" />
                                 </yAxis>
                              </LineChart>
                           </content>
                        </ScrollPane>
                     </children>
                  </VBox>

                  <!-- ç¼´è´¹æƒ…å†µç»Ÿè®¡ -->
                  <VBox spacing="10" alignment="CENTER" styleClass="stats-chart-card" VBox.vgrow="ALWAYS">
                     <children>
                        <Label text="ç¼´è´¹æƒ…å†µç»Ÿè®¡" styleClass="stats-chart-title" />
                        <ScrollPane fitToWidth="true" fitToHeight="true" VBox.vgrow="ALWAYS" styleClass="stats-chart-scroll">
                           <content>
                              <PieChart fx:id="paymentChart" title="" prefWidth="320" prefHeight="250" styleClass="stats-chart" legendSide="BOTTOM">
                              </PieChart>
                           </content>
                        </ScrollPane>
                     </children>
                  </VBox>
               </children>
            </HBox>
         </children>
         <VBox.margin>
            <Insets bottom="15.0" left="30.0" right="30.0" top="5.0" />
         </VBox.margin>
      </VBox>

      <!-- æ•°æ®è¡¨æ ¼åŒºåŸŸ -->
      <VBox spacing="15" alignment="CENTER_LEFT" styleClass="stats-table-area" VBox.vgrow="ALWAYS">
         <children>
            <Label text="ðŸ“‹ è¯¦ç»†æ•°æ®è¡¨" styleClass="stats-section-title" />

            <VBox styleClass="stats-table-container" VBox.vgrow="ALWAYS">
               <children>
                  <TableView fx:id="detailedTable" styleClass="stats-table" VBox.vgrow="ALWAYS">
                     <columns>
                        <TableColumn fx:id="categoryColumn" text="åˆ†ç±»" prefWidth="120" styleClass="stats-table-column" />
                        <TableColumn fx:id="nameColumn" text="åç§°" prefWidth="180" styleClass="stats-table-column" />
                        <TableColumn fx:id="countColumn" text="æ•°é‡" prefWidth="80" styleClass="stats-table-column" />
                        <TableColumn fx:id="percentageColumn" text="å æ¯”(%)" prefWidth="80" styleClass="stats-table-column" />
                        <TableColumn fx:id="statusColumn" text="çŠ¶æ€" prefWidth="100" styleClass="stats-table-column" />
                     </columns>
                  </TableView>
               </children>
            </VBox>
         </children>
         <VBox.margin>
            <Insets bottom="25.0" left="30.0" right="30.0" top="5.0" />
         </VBox.margin>
      </VBox>

      <!-- åº•éƒ¨çŠ¶æ€æ  -->
      <HBox spacing="20" alignment="CENTER_LEFT" styleClass="stats-status-bar">
         <children>
            <Label fx:id="lastUpdateLabel" text="æœ€åŽæ›´æ–°: 2024-01-11 15:00:00" styleClass="stats-status-text" />
            <Region HBox.hgrow="ALWAYS" />
            <Label fx:id="dataSourceLabel" text="æ•°æ®æ¥æº: å®¿èˆç®¡ç†ç³»ç»Ÿæ•°æ®åº“" styleClass="stats-status-text" />
         </children>
         <VBox.margin>
            <Insets bottom="20.0" left="30.0" right="30.0" top="10.0" />
         </VBox.margin>
      </HBox>
   </children>
</VBox>