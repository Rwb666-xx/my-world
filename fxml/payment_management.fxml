<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.collections.FXCollections?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.Font?>
<?import java.lang.String?>

<VBox xmlns="http://javafx.com/javafx/11.0.1" xmlns:fx="http://javafx.com/fxml/1" fx:controller="org.dorm.view.PaymentManagementController" spacing="20.0" styleClass="payment-management-root">
   <children>
      <!-- æ ‡é¢˜åŒºåŸŸ -->
      <VBox spacing="15" alignment="CENTER" styleClass="page-header">
         <children>
            <Label text="ðŸ’°" styleClass="page-icon" />
            <Label text="ç¼´è´¹ç®¡ç†" styleClass="page-title" />
            <Label text="ç®¡ç†ç³»ç»Ÿä¸­å­¦ç”Ÿçš„ä½å®¿è´¹ç”¨ç¼´çº³æƒ…å†µ" styleClass="page-subtitle" />
            <Separator styleClass="page-separator" />
         </children>
         <VBox.margin>
            <Insets bottom="10.0" left="20.0" right="20.0" top="20.0" />
         </VBox.margin>
      </VBox>

      <!-- å·¥å…·æ åŒºåŸŸ -->
      <HBox spacing="15" alignment="CENTER_LEFT" styleClass="toolbar">
         <children>
            <!-- æ“ä½œæŒ‰é’®ç»„ -->
            <HBox spacing="10" alignment="CENTER_LEFT">
               <children>
                  <Button fx:id="addButton" styleClass="primary-button" onAction="#showAddDialog" text="âž• æ·»åŠ ç¼´è´¹è®°å½•" />
                  <Button fx:id="editButton" styleClass="secondary-button" onAction="#showEditDialog" text="âœï¸ ç¼–è¾‘" />
                  <Button fx:id="deleteButton" styleClass="danger-button" onAction="#deletePayment" text="ðŸ—‘ï¸ åˆ é™¤" />
                  <Button fx:id="refreshButton" styleClass="info-button" onAction="#refreshPayments" text="ðŸ”„ åˆ·æ–°" />
               </children>
            </HBox>

            <!-- æœç´¢åŒºåŸŸ -->
            <HBox spacing="10" alignment="CENTER_LEFT">
               <children>
                  <Label text="ðŸ”" styleClass="search-icon" />
                  <TextField fx:id="searchField" promptText="æœç´¢å­¦ç”Ÿå§“åã€å­¦å·..." styleClass="search-field" />
                  <ComboBox fx:id="searchTypeCombo" styleClass="search-combo">
                     <items>
                        <FXCollections fx:factory="observableArrayList">
                           <String fx:value="å…¨éƒ¨" />
                           <String fx:value="å­¦å·" />
                           <String fx:value="å§“å" />
                           <String fx:value="å­¦æœŸ" />
                        </FXCollections>
                     </items>
                  </ComboBox>
                  <Button fx:id="searchButton" styleClass="search-button" onAction="#searchPayments" text="æœç´¢" />
               </children>
            </HBox>

            <!-- çŠ¶æ€æ˜¾ç¤º -->
            <VBox spacing="5" alignment="CENTER_RIGHT">
               <children>
                  <Label fx:id="statusLabel" styleClass="status-info" text="å…± 0 æ¡è®°å½•" />
                  <Label fx:id="selectedLabel" styleClass="status-info" text="å·²é€‰æ‹© 0 é¡¹" />
               </children>
            </VBox>
         </children>
         <VBox.margin>
            <Insets bottom="15.0" left="20.0" right="20.0" top="10.0" />
         </VBox.margin>
      </HBox>

      <!-- ç¼´è´¹è®°å½•åˆ—è¡¨åŒºåŸŸ -->
      <VBox spacing="10" VBox.vgrow="ALWAYS" styleClass="table-container">
         <children>
            <!-- è¡¨æ ¼ -->
            <TableView fx:id="paymentTable" styleClass="modern-table">
               <columns>
                  <TableColumn fx:id="paymentIdColumn" text="ç¼´è´¹å•å·" prefWidth="130" styleClass="table-column" visible="true" />
                  <TableColumn fx:id="studentIdColumn" text="å­¦å·" prefWidth="110" styleClass="table-column" visible="true" />
                  <TableColumn fx:id="studentNameColumn" text="å­¦ç”Ÿå§“å" prefWidth="90" styleClass="table-column" visible="true" />
                  <TableColumn fx:id="amountColumn" text="ç¼´è´¹é‡‘é¢" prefWidth="90" styleClass="table-column" visible="true" />
                  <TableColumn fx:id="paymentDateColumn" text="ç¼´è´¹æ—¥æœŸ" prefWidth="110" styleClass="table-column" visible="true" />
                  <TableColumn fx:id="semesterColumn" text="ç¼´è´¹å­¦æœŸ" prefWidth="140" styleClass="table-column" visible="true" />
                  <TableColumn fx:id="statusColumn" text="ç¼´è´¹çŠ¶æ€" prefWidth="90" styleClass="table-column" visible="true" />
               </columns>
               <columnResizePolicy>
                  <TableView fx:constant="CONSTRAINED_RESIZE_POLICY" />
               </columnResizePolicy>
            </TableView>

            <!-- åˆ†é¡µæŽ§ä»¶ -->
            <HBox spacing="15" alignment="CENTER" styleClass="pagination-area">
               <children>
                  <Button fx:id="firstPageButton" styleClass="pagination-button" onAction="#goToFirstPage" text="é¦–é¡µ" />
                  <Button fx:id="prevPageButton" styleClass="pagination-button" onAction="#goToPrevPage" text="ä¸Šä¸€é¡µ" />
                  <Label fx:id="pageInfoLabel" styleClass="page-info" text="ç¬¬ 1 é¡µ / å…± 1 é¡µ" />
                  <Button fx:id="nextPageButton" styleClass="pagination-button" onAction="#goToNextPage" text="ä¸‹ä¸€é¡µ" />
                  <Button fx:id="lastPageButton" styleClass="pagination-button" onAction="#goToLastPage" text="æœ«é¡µ" />
                  <Region HBox.hgrow="ALWAYS" />
                  <Label text="æ¯é¡µæ˜¾ç¤º:" styleClass="page-size-label" />
                  <ComboBox fx:id="pageSizeCombo" styleClass="page-size-combo" onAction="#changePageSize">
                     <items>
                        <FXCollections fx:factory="observableArrayList">
                           <String fx:value="10" />
                           <String fx:value="20" />
                           <String fx:value="50" />
                           <String fx:value="100" />
                        </FXCollections>
                     </items>
                  </ComboBox>
               </children>
            </HBox>
         </children>
         <VBox.margin>
            <Insets bottom="20.0" left="20.0" right="20.0" top="10.0" />
         </VBox.margin>
      </VBox>

      <!-- åº•éƒ¨çŠ¶æ€æ  -->
      <HBox spacing="20" alignment="CENTER_LEFT" styleClass="status-bar">
         <children>
            <Label fx:id="messageLabel" styleClass="status-message" text="å°±ç»ª" />
            <Region HBox.hgrow="ALWAYS" />
            <Label fx:id="lastUpdateLabel" styleClass="status-info" text="æœ€åŽæ›´æ–°: --:--:--" />
         </children>
         <VBox.margin>
            <Insets bottom="10.0" left="20.0" right="20.0" top="5.0" />
         </VBox.margin>
      </HBox>
   </children>
</VBox>